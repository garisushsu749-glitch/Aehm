<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù†  Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ | Ù…Ù†ØµØ© Ù…Ù‡Ù†ÙŠØ© Ù…ØªØ®ØµØµØ©</title> 
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* ==================================== */
        /* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø£Ù„ÙˆØ§Ù† - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ */
        /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø£Ù„ÙˆØ§Ù† Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† Ø§Ù„ØªØ±Ø§Ø« (Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„Ø·ÙŠÙ†ÙŠ/Ø§Ù„Ø¨Ù†ÙŠ Ø§Ù„Ø°Ù‡Ø¨ÙŠ) */
        /* ==================================== */
        :root {
            --primary-color: #A52A2A; /* Ø¨Ù†ÙŠ Ù…Ø­Ù…Ø±/Ø·ÙŠÙ†ÙŠ - Ù„ÙˆÙ† Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ø¹Ø±Ø¨ÙŠ */
            --secondary-color: #b8860b; /* Ø°Ù‡Ø¨ÙŠ Ø¯Ø§ÙƒÙ†/Ø¨Ø±ÙˆÙ†Ø²ÙŠ - Ù„ÙˆÙ† Ø«Ø§Ù†ÙˆÙŠ */
            --background-app: #ffffff; 
            --text-color: #212529;
            --card-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
            --input-bg: #f5f5f5; 
            --support-color: #ffc107; 
            --transition-speed: 0.4s;
            --background-body: linear-gradient(135deg, #f5f5dc 0%, #ffffff 100%); /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¬ ÙØ§ØªØ­/Ø¨ÙŠØ§Ø¶ Ø§Ù„Ø¹Ø§Ø¬ */
        }

        /* ==================================== */
        /* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø£Ù„ÙˆØ§Ù† - Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† */
        /* ==================================== */
        .dark-mode {
            --background-body: #0a0a0a; 
            --background-app: #1c1c1c;
            --text-color: #f1f1f1;
            --primary-color: #ffb74d; /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙØ§ØªØ­ */
            --secondary-color: #ffd700; /* Ø°Ù‡Ø¨ÙŠ ÙØ§ØªØ­ */
            --input-bg: #2d2d2d;
            --card-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
        }

        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¹Ø§Ù…Ø© */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tajawal', sans-serif; }

        body {
            background: var(--background-body);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 0;
            transition: background var(--transition-speed) ease, background-color var(--transition-speed) ease;
        }
        
        /* ==================================== */
        /* 1. ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        /* ==================================== */
        .login-container {
            width: 100%;
            max-width: 450px;
            padding: 40px 25px;
            background-color: var(--background-app);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            text-align: center;
            color: var(--text-color);
        }
        .login-container h2 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 30px;
            font-weight: 900;
        }
        /* ... (ØªÙ†Ø³ÙŠÙ‚Ø§Øª input-group, login-button, login-error-message Ù„Ù… ØªØªØºÙŠØ±) ... */
        .input-group { margin-bottom: 20px; text-align: right; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 700; color: var(--text-color); }
        .input-group input, .input-group select { width: 100%; padding: 15px; border: 2px solid var(--input-bg); border-radius: 12px; background-color: var(--input-bg); font-size: 1rem; color: var(--text-color); transition: border-color var(--transition-speed); appearance: none; background-repeat: no-repeat; background-position: left 15px center; padding-left: 50px; }
        .input-group input:focus, .input-group select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(165, 42, 42, 0.2); }
        .login-button { width: 100%; padding: 15px; font-size: 1.2rem; font-weight: 800; margin-top: 10px; background: linear-gradient(135deg, var(--primary-color), #8B0000); /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */ color: white; border-radius: 15px; box-shadow: 0 8px 20px rgba(165, 42, 42, 0.5); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .login-button:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(165, 42, 42, 0.7); }
        #login-error-message { color: #dc3545; font-weight: 700; margin-top: 15px; display: none; }

        /* ==================================== */
        /* 2. ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        /* ==================================== */

        .app-container {
            display: none; 
            width: 100%;
            max-width: 450px; 
            min-height: 100vh;
            background-color: var(--background-app);
            box-shadow: var(--card-shadow);
            padding: 30px 25px;
            color: var(--text-color);
            transition: all var(--transition-speed) ease;
            position: relative;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ø´Ø¹Ø§Ø± - Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø´ÙƒÙ„ ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« (Ø§Ù„Ù‚Ù„Ù…/Ø§Ù„ÙƒØªØ§Ø¨) */
        .app-header { 
            text-align: center; 
            margin-bottom: 20px; 
            padding-bottom: 15px; 
            border-bottom: 1px solid var(--input-bg);
            position: relative; 
        }
        /* Ø§Ù„Ø´Ø¹Ø§Ø±: Ø±Ù…Ø² Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ù„ØªØ±Ø§Ø« (Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ÙŠÙ…ÙˆØ¬ÙŠ) */
        .app-header .app-logo {
            display: inline-block;
            margin-bottom: 10px;
            color: var(--primary-color); 
            font-size: 4rem; 
            line-height: 1;
        }
        /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„Ø¬Ø¹Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù†ØµØ© Ø£ÙƒØ¨Ø± */
        .app-header h1 {
            font-size: 1.8rem; 
            font-weight: 900; 
            color: var(--primary-color);
            line-height: 1.3;
        }
        .app-header h1 span {
            display: block;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--secondary-color);
        }

        /* ... (ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¨Ø­Ø« Ù„Ù… ØªØªØºÙŠØ±) ... */
        .search-container { position: relative; margin-bottom: 30px; }
        #search-input, #main-search-input, #browser-search-input { width: 100%; padding: 15px 50px 15px 20px; border: 2px solid var(--input-bg); border-radius: 12px; background-color: var(--input-bg); font-size: 1rem; color: var(--text-color); transition: border-color var(--transition-speed); }
        #search-input:focus, #main-search-input:focus, #browser-search-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(165, 42, 42, 0.2); }
        .search-container .search-icon { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); color: #999; font-size: 1.2rem; }
        .dark-mode .search-container .search-icon { color: #ccc; }


        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© - ØªÙ… ØªØ«Ø¨ÙŠØªÙ‡Ø§ Ø¨Ù€ fixed ÙˆØ²ÙŠØ§Ø¯Ø© Z-index */
        .corner-button {
            position: fixed; 
            top: 20px;
            background: var(--input-bg); 
            border: 1px solid var(--primary-color);
            border-radius: 50%;
            width: 50px; 
            height: 50px;
            cursor: pointer;
            padding: 0;
            transition: all var(--transition-speed) ease; 
            z-index: 2000; 
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 1.5rem; 
            line-height: 1;
        }
        .dark-mode .corner-button {
             background: #333;
             border-color: var(--secondary-color);
        }
        .corner-button:hover { 
            transform: scale(1.1); 
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        /* Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø± Ø¨Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³ */
        .corner-button.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: translateY(-20px);
        }


        #mode-toggle { right: 20px; }
        #profile-button { left: 20px; }

        /* ... (ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„Ø´Ø¨ÙƒØ© Ù„Ù… ØªØªØºÙŠØ±) ... */
        button { border: none; border-radius: 15px; cursor: pointer; transition: all var(--transition-speed) ease; }
        .main-button { background: linear-gradient(135deg, var(--primary-color), #8B0000); /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ø¨Ù†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */ color: white; height: 120px; border-radius: 25px; box-shadow: 0 15px 35px rgba(165, 42, 42, 0.5); margin-bottom: 30px; display: flex; flex-direction: row; padding: 20px; justify-content: center; align-items: center; text-align: right; }
        .dark-mode .main-button { background: linear-gradient(135deg, var(--primary-color), #732323); box-shadow: 0 15px 35px rgba(255, 183, 77, 0.5); }
        .main-button .button-icon { font-size: 3.5rem; margin-left: 15px; }
        .main-button .button-text { font-size: 1.6rem; font-weight: 900; }
        .main-button:hover { transform: translateY(-3px) scale(1.02); }
        .grid-buttons { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px; }
        .grid-button { background-color: var(--input-bg); color: var(--text-color); height: 100px; padding: 15px; border-radius: 18px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); font-size: 0.95rem; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid transparent; font-weight: 700; }
        .grid-button:hover { transform: scale(1.05); border-color: var(--primary-color); }
        .dark-mode .grid-button { background-color: #2a2a2a; box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05); }
        .grid-button .button-icon { color: var(--primary-color); font-size: 2.2rem; margin-bottom: 5px; }
        .dark-mode .grid-button .button-icon { color: var(--secondary-color); }
        .grid-button .button-text { font-size: 0.95rem; line-height: 1.2; font-weight: 800; }

        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ - Ø§Ù„Ø­Ù‚ÙˆÙ‚ (Ù…Ø­Ø¯Ø«) */
        .credits { margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; font-size: 0.85rem; color: #777; text-align: right; line-height: 1.9; }
        .dark-mode .credits { border-top: 1px solid #333; color: #aaa; }
        /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: ØªØºÙŠÙŠØ± Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ© ÙÙŠ Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        .credits strong { color: var(--primary-color); display: block; margin-bottom: 5px; font-size: 1rem; }
        .credits .credit-line { display: block; margin-bottom: 3px; }

        /* ==================================== */
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) */
        /* ==================================== */
        .modal { 
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0; 
            top: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0, 0, 0, 0.7); 
            justify-content: center; 
            align-items: center; 
            backdrop-filter: blur(5px); 
        }
        /* ØªØ¹Ø¯ÙŠÙ„ Ø®Ø§Øµ Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù‚Ø§Ø±Ø¦ Ù„Ø¬Ø¹Ù„Ù‡Ø§ ØªÙ…Ù„Ø£ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        #bookReader {
            background-color: var(--background-app); 
            z-index: 2000; 
            padding: 0;
        }

        .modal-content { 
            background-color: var(--background-app); 
            padding: 30px; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 450px; 
            box-shadow: var(--card-shadow); 
            color: var(--text-color); 
            position: relative; 
            transform: scale(0.9); 
            animation: modal-open 0.3s forwards cubic-bezier(0.25, 0.46, 0.45, 0.94); 
            max-height: 90vh; 
            overflow-y: auto; 
        }
        /* ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚Ø§Ø±Ø¦ */
        #bookReader .modal-content {
             max-width: 100%;
             max-height: 100%;
             width: 100%;
             height: 100%;
             padding: 0;
             border-radius: 0;
             box-shadow: none;
             overflow: hidden; 
        }
        /* ØªÙ†Ø³ÙŠÙ‚ iframe Ø§Ù„Ù‚Ø§Ø±Ø¦ */
        #book-iframe {
            width: 100%;
            height: calc(100% - 70px); 
            border: none;
            display: block;
            background-color: #fce4ec;
        }
        #bookReader .header-reader {
             display: flex;
             justify-content: space-between;
             align-items: center;
             height: 70px;
             padding: 0 20px;
             border-bottom: 1px solid var(--input-bg);
        }
        #bookReader .header-reader h2 {
             font-size: 1.4rem;
             color: var(--primary-color);
             margin: 0;
             padding: 0;
             border-bottom: none;
        }


        @keyframes modal-open { to { transform: scale(1); } }
        .modal-content h2 { color: var(--primary-color); border-bottom: 3px solid var(--primary-color); padding-bottom: 10px; margin-bottom: 25px; font-size: 1.6rem; display: flex; align-items: center; }
        .modal-content .close-button { position: absolute; top: 15px; left: 15px; color: var(--text-color); font-size: 30px; font-weight: 300; background: none; width: auto; height: auto; line-height: 1; padding: 0; cursor: pointer; }
        .modal-content .close-button:hover { color: var(--secondary-color); }
        
        #bookReader .close-button {
             position: static; 
             color: #dc3545; 
             font-size: 1.2rem;
             padding: 10px 15px;
             background-color: var(--input-bg);
             border-radius: 10px;
        }
        #bookReader .close-button:hover {
            background-color: #eee;
        }
        .dark-mode #bookReader .close-button:hover {
            background-color: #3a3a3a;
        }
        
        .back-button { background-color: var(--primary-color); color: white; padding: 12px; border-radius: 12px; margin-bottom: 20px; font-size: 1.05rem; font-weight: 700; display: block; width: 100%; text-align: center; box-shadow: 0 4px 10px rgba(165, 42, 42, 0.4); }
        .stage-list, .subject-list { list-style-type: none; padding: 0; }
        .stage-item, .subject-item { padding: 18px; margin-bottom: 12px; background-color: var(--input-bg); border-radius: 15px; cursor: pointer; transition: all var(--transition-speed); display: flex; justify-content: space-between; align-items: center; font-weight: 800; color: var(--text-color); border-right: 5px solid var(--primary-color); }
        .dark-mode .stage-item, .dark-mode .subject-item { border-right: 5px solid var(--secondary-color); }
        .stage-item:hover, .subject-item:hover { background-color: #f0f0f0; transform: translateX(-8px); box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); }
        .dark-mode .stage-item:hover, .dark-mode .subject-item:hover { background-color: #3a3a3a; transform: translateX(-8px); box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1); }
        .subject-details { font-size: 0.85rem; color: #6c757d; margin-top: 5px; font-weight: 400; display: block; }
        .dark-mode .subject-details { color: #ccc; }
        .favorite-toggle { background: none; border: none; cursor: pointer; padding: 5px; font-size: 1.5rem; color: #ccc; transition: color 0.3s; margin-left: 10px; }
        .favorite-toggle.is-favorite { color: #A52A2A; } /* ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ù†ÙŠ */
        
        #support-fab { 
            position: fixed; 
            bottom: 20px; 
            left: 20px; 
            z-index: 1002; 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            background-color: var(--secondary-color); /* Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ */
            color: var(--text-color); 
            border: none; 
            box-shadow: 0 8px 20px rgba(184, 134, 11, 0.6); 
            cursor: pointer; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 1.8rem; 
            transition: all var(--transition-speed) ease; 
        }
        #support-fab.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transform: translateY(20px);
        }

        #support-fab:hover { transform: scale(1.1); box-shadow: 0 10px 25px rgba(184, 134, 11, 0.8); }
        #support-fab .fab-icon { color: #3e2723; }
        
        /* ==================================== */
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ */
        /* ==================================== */
        #ai-chat-box {
            background-color: var(--input-bg);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--secondary-color); 
        }
        .dark-mode #ai-chat-box {
            border: 1px solid var(--primary-color);
        }
        
        #ai-chat-box h4 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-weight: 800;
            display: flex;
            align-items: center;
        }
        
        #ai-chat-box .ai-prompt-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 0.95rem;
            background-color: var(--background-app);
            color: var(--text-color);
            border: 2px solid var(--input-bg);
        }
        .dark-mode #ai-chat-box .ai-prompt-input {
             border: 1px solid #444;
        }

        #ai-chat-box .ai-prompt-input:focus {
            outline: none; 
            border-color: var(--primary-color); 
            box-shadow: 0 0 0 3px rgba(165, 42, 42, 0.2);
        }
        
        .ai-chat-button {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--secondary-color), #daa520); /* ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø²Ø± */
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(184, 134, 11, 0.4);
        }
        
        .ai-chat-button:hover {
            transform: translateY(-1px);
        }
        
        .ai-response-area {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--background-app);
            border-radius: 10px;
            border-left: 5px solid var(--primary-color);
            line-height: 1.7;
            font-size: 0.95rem;
            max-height: 250px;
            overflow-y: auto;
            color: var(--text-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        .dark-mode .ai-response-area {
            border-left: 5px solid var(--secondary-color);
        }
        
        /* ... (Ø¨Ù‚ÙŠØ© Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ù… ØªØªØºÙŠØ±) ... */
        .support-contact-info li { padding: 15px; margin-bottom: 10px; background-color: var(--input-bg); border-radius: 10px; cursor: pointer; transition: var(--transition-speed); display: flex; align-items: center; font-weight: 700; }
        .support-contact-info li:hover { background-color: #eee; transform: translateX(-5px); }
        .dark-mode .support-contact-info li:hover { background-color: #3a3a3a; }
        .support-contact-info .icon { font-size: 1.5rem; margin-left: 10px; color: var(--primary-color); }
        .content-box { padding: 15px; background-color: var(--input-bg); border-radius: 10px; margin-bottom: 15px; line-height: 1.6; }
        .content-box h4 { color: var(--secondary-color); margin-bottom: 10px; font-weight: 800; }
        .setting-option { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px dashed #ccc; }
        .dark-mode .setting-option { border-bottom: 1px dashed #444; }
        .setting-option:last-child { border-bottom: none; }
        .switch { position: relative; display: inline-block; width: 45px; height: 25px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 25px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 3.5px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(18px); }
        .profile-info h3 { font-size: 1.5rem; color: var(--primary-color); margin-bottom: 20px; display: flex; align-items: center; }
        .profile-detail { background-color: var(--input-bg); padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; font-weight: 700; }
        .profile-detail span:last-child { color: var(--secondary-color); font-weight: 800; }
        .logout-button { width: 100%; margin-top: 30px; padding: 15px; font-size: 1.1rem; font-weight: 800; background-color: #dc3545; color: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(220, 53, 69, 0.5); }
        .logout-button:hover { background-color: #c82333; transform: translateY(-2px); }
        .favorite-list-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; margin-bottom: 10px; background-color: var(--input-bg); border-radius: 10px; font-weight: 700; border-right: 5px solid #A52A2A; /* ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø¨ÙˆØ±Ø¯Ø± */ transition: all 0.3s; }
        .favorite-list-item:hover { background-color: #f0f0f0; transform: translateX(-5px); }
        .dark-mode .favorite-list-item:hover { background-color: #3a3a3a; }
        .remove-favorite { background: none; border: none; color: #A52A2A; /* ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø­Ø°Ù */ font-weight: 800; cursor: pointer; font-size: 1rem; margin-left: 10px; }
        .remove-favorite:hover { text-decoration: underline; }

        /* ØªÙ… Ø­Ø°Ù ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ù†Ø°Ø§Ø±Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */

    </style>
</head>
<body>

    <div class="login-container" id="login-screen">
        <header class="app-header">
            <span class="app-logo">
                âœï¸
            </span>
            <h1>
                Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ 
                <span>| Ù…Ù†ØµØ© Ù…Ù‡Ù†ÙŠØ© Ù…ØªØ®ØµØµØ©</span>
            </h1>
        </header>

        <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        
        <div class="input-group">
            <label for="studentName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</label>
            <input type="text" id="studentName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" required>
        </div>
        
        <div class="input-group">
            <label for="studentSection">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©:</label>
            <select id="studentSection" required>
                <option value="arabic" selected>Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù†</option>
            </select>
        </div>

        <div class="input-group">
            <label for="studentStage">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</label>
            <select id="studentStage" required>
                <option value="" disabled selected>-- Ø§Ø®ØªØ± Ù…Ø±Ø­Ù„ØªÙƒ --</option>
                <option value="1">Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù†ÙŠ</option>
                <option value="2">Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ù‡Ù†ÙŠ</option>
                <option value="3">Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…Ù‡Ù†ÙŠ</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="studentPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
            <input type="password" id="studentPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ø£ÙŠ Ø´ÙŠØ¡)" required>
        </div>
        
        <p id="login-error-message">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</p>
        
        <button class="login-button" onclick="attemptLogin()">
            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø¨Ø¯Ø¡
        </button>
        
        <footer class="credits" style="margin-top: 30px; border-top: none;">
            <p style="text-align: center; font-size: 0.9rem;">
                Ù„Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…ÙƒØŒ ÙˆØ§Ø®ØªÙØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŒ ÙˆØ£Ø¯Ø®Ù„ Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±.
            </p>
        </footer>
    </div>
    
    
    <button id="mode-toggle" class="corner-button hidden" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹" style="display: none;">
        <span id="mode-icon">ğŸŒ™</span> 
    </button>
    
    <button id="profile-button" class="corner-button hidden" aria-label="Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø®ØµÙŠ" style="display: none;" onclick="openModal('userProfile')">
        <span>ğŸ‘¤</span>
    </button>

    <div class="app-container" id="main-app-container">
        
        <header class="app-header">
             <span class="app-logo">
                âœï¸
            </span>
            <h1>
                Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ 
                <span>| Ù…Ù†ØµØ© Ù…Ù‡Ù†ÙŠØ© Ù…ØªØ®ØµØµØ©</span>
            </h1>
        </header>

        <main class="main-content">
            
            <div class="search-container">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </span>
                <input type="text" id="main-search-input" placeholder="Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¯Ø±ÙˆØ³ ÙˆÙ…Ø±Ø§Ø­Ù„ Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©..." oninput="syncSearchInput()">
            </div>
            
            <button class="main-button" onclick="openModal('stagesBrowser')">
                <div class="button-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20V5H6.5A2.5 2.5 0 0 0 4 7.5v12z"></path></svg>
                </div>
                <span class="button-text">ØªØµÙØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ùˆ Ø§Ù„Ø¯Ø±ÙˆØ³</span>
            </button>

            <div class="grid-buttons">
                <button class="grid-button" onclick="openModal('myFavorites')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="var(--primary-color)" stroke="var(--primary-color)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    </span>
                    <span class="button-text">Ù…ÙØ¶Ù„ØªÙŠ</span>
                </button>
                
                 <button class="grid-button" onclick="openModal('settings')">
                     <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0-.33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1.51-1V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                    </span>
                    <span class="button-text">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
                </button>
                <button class="grid-button" onclick="openModal('importantAdds')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM12 16h-.01M11 7h2v7h-2V7z"/></svg>
                    </span>
                    <span class="button-text">Ø¥Ø¶Ø§ÙØ§Øª Ù‡Ø§Ù…Ø©</span>
                </button>
                <button class="grid-button" onclick="openModal('digitalReader')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="9" y2="9"></line></svg>
                    </span>
                    <span class="button-text">Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ù‚Ù…ÙŠ</span>
                </button>
                <button class="grid-button" onclick="openModal('usageGuide')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    </span>
                    <span class="button-text">Ø´Ø±Ø­ Ø§Ù„Ø¥Ø³ØªØ®Ø¯Ø§Ù…</span>
                </button>
                <button class="grid-button" onclick="openModal('supportShare')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12V2a2 2 2 0 0 1 2-2h12a2 2 2 0 0 1 2 2v10M12 24v-6M9 21h6"/></svg>
                    </span>
                    <span class="button-text">Ø¯Ø¹Ù… ÙˆÙ†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</span>
                </button>
                
                 <button class="grid-button" onclick="openModal('technicalSupport')">
                    <span class="button-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c0 2.76-2.24 5-5 5S2 14.76 2 12s2.24-5 5-5c.42 0 .82.04 1.21.12"/><path d="M21 12c0 2.76-2.24 5-5 5s-5-2.24-5-5 2.24-5 5-5c.39 0 .79.04 1.18.12"/><path d="M14 9l7-7M3 21l7-7"/></svg>
                    </span>
                    <span class="button-text">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ ÙˆØ§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</span>
                </button>
                
                 </div>
            
        </main>
        
        <footer class="credits">
            <strong>Ù…Ù†ØµØ© Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠ | Ù…Ù†ØµØ© Ù…Ù‡Ù†ÙŠØ© Ù…ØªØ®ØµØµØ©</strong>
            <span class="credit-line" style="font-weight: 700; color: #777;">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·Ø¨Ø¹ ÙˆØ§Ù„Ù†Ø´Ø± &copy; 2025-2026</span>
            <span class="credit-line">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: 
                <a href="https://t.me/pg_virus3" target="_blank" style="color: var(--primary-color); font-weight: 800; text-decoration: none;">
                    Ø§ÙŠÙ‡Ù… ÙØ±Ø§Ø³ Ø¬Ù…Ø§Ù„
                </a>
            </span>
            <span class="credit-line">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</span>
        </footer>
    </div>
    
    <button id="support-fab" class="hidden" onclick="openModal('technicalSupport')">
        <span class="fab-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#3e2723" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 15h7A4.5 4.5 0 0 0 20 10.5C20 8 16.82 5.56 12 5.56 7.18 5.56 4 8 4 10.5A4.5 4.5 0 0 0 8.5 15z"></path><path d="M10 18v1a2 2 0 1 0 4 0v-1"></path><path d="M12 22v-3"></path></svg>
        </span>
    </button>
    
    
    <div id="userProfile" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('userProfile')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸ‘¤</span> Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</h2>
            
            <div class="profile-info">
                <div class="profile-detail">
                    <span>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</span>
                    <span id="profile-name">--</span>
                </div>
                <div class="profile-detail">
                    <span>Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</span>
                    <span id="profile-section">--</span>
                </div>
                <div class="profile-detail">
                    <span>Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©:</span>
                    <span id="profile-stage">--</span>
                </div>
            </div>
            
            <button class="logout-button" onclick="logout()">
                ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            </button>
            
            <p style="text-align: center; margin-top: 20px; font-size: 0.85rem; color: #777;">
                * Ù„ØªØºÙŠÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.
            </p>
        </div>
    </div>
    
    <div id="technicalSupport" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('technicalSupport')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--secondary-color); margin-left: 10px;">ğŸ§ </span> Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ÙˆØ§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h2>
            
            <div id="ai-chat-box">
                <h4><span style="margin-left: 10px;">ğŸ¤–</span> Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©!</h4>
                <p style="margin-bottom: 15px; font-size: 0.9rem; color: #6c757d;">Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ ÙˆØ³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø­Ù„ ÙˆØ§Ù„Ø´Ø±Ø­.</p>
                <input type="text" id="ai-prompt-input" class="ai-prompt-input" placeholder="Ù…Ø«Ø§Ù„: Ø§Ø´Ø±Ø­ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙˆØ§Ù„ØªØ£Ø®ÙŠØ±" onkeyup="if(event.keyCode == 13) getAIResponse()">
                <button class="ai-chat-button" onclick="getAIResponse()">
                    Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„
                </button>
                <div id="ai-response-area" class="ai-response-area" style="display:none;">
                    <p style="font-weight: 700; color: var(--primary-color);">Ø±Ø¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ:</p>
                    <p id="ai-response-text">...</p>
                </div>
            </div>
            
            <p style="margin-bottom: 15px; font-weight: 700; border-top: 1px solid var(--input-bg); padding-top: 15px;">Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¨Ø´Ø±ÙŠ:</p>
            <ul class="support-contact-info" style="list-style-type: none; padding: 0;">
                <li onclick="window.open('https://t.me/pg_virus3', '_blank', 'noopener,noreferrer')">
                    <span class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </span>
                    Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬)
                </li>
            </ul>
        </div>
    </div>
    
    <div id="stagesBrowser" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('stagesBrowser')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸ“š</span> ØªØµÙØ­ Ù…Ø±Ø§Ø­Ù„ ÙˆØ¯Ø±ÙˆØ³ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</h2>
            
             <div class="search-container" style="margin-bottom: 20px;">
                <span class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </span>
                <input type="text" id="browser-search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¯Ø±ÙˆØ³...">
            </div>

            <div id="sections-container">
                <ul class="stage-list">
                    </ul>
            </div>
            
            <div id="stages-by-section-container" style="display: none;">
                <h3 id="section-stages-title" style="margin-bottom: 20px; color: var(--secondary-color);"></h3>
                <button class="back-button" onclick="showSections()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ù‚Ø³Ø§Ù…</button>
                <ul id="stages-list-by-section" class="stage-list">
                    </ul>
            </div>
            
            <div id="books-container" style="display: none;">
                <h3 id="stage-title" style="margin-bottom: 20px; color: var(--secondary-color);"></h3>
                <button class="back-button">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…Ø±Ø§Ø­Ù„</button>
                <a id="section-link" target="_blank" style="margin-bottom: 20px; display: none; color: white; background-color: var(--secondary-color); padding: 10px; border-radius: 10px; text-align: center; text-decoration: none; font-weight: 700;">
                    Ù‚Ù†Ø§Ø© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ø¹Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
                </a>
                <ul id="subjects-list" class="subject-list">
                    </ul>
            </div>
        </div>
    </div>
    
    <div id="myFavorites" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('myFavorites')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: #A52A2A; margin-left: 10px;">ğŸ’–</span> Ù…ÙØ¶Ù„ØªÙŠ</h2>
            
            <ul id="favorites-list">
                </ul>
            
            <p id="empty-favorites" style="text-align: center; margin-top: 30px; color: #777; font-weight: 700;">
                Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙØ§Ø±ØºØ©. Ø£Ø¶Ù Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬Ù‡Ø§ Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹!
            </p>
        </div>
    </div>
    
    <div id="settings" class="modal">
         <div class="modal-content">
            <span class="close-button" onclick="closeModal('settings')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">âš™ï¸</span> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>

            <div class="content-box">
                <h4>Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</h4>
                <div class="setting-option">
                    <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
                    <label class="switch">
                      <input type="checkbox" id="autoDarkMode" onclick="toggleDarkMode()">
                      <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div class="content-box">
                <h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
                 <div class="setting-option">
                    <span>Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©</span>
                    <button class="logout-button" style="width: 100px; padding: 8px; font-size: 0.9rem; margin-top: 0;" onclick="clearAllData(false); displayFavorites();">Ù…Ø³Ø­</button>
                </div>
                <div class="setting-option">
                    <span>Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù…ÙØ¶Ù„Ø©</span>
                    <button class="logout-button" style="width: 100px; padding: 8px; font-size: 0.9rem; margin-top: 0;" onclick="clearAllData(true)">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                </div>
            </div>
            
            <p style="text-align: center; margin-top: 20px; font-size: 0.85rem; color: #777;">
                * Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ ÙŠØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.
            </p>
        </div>
    </div>
    
    <div id="importantAdds" class="modal">
         <div class="modal-content">
            <span class="close-button" onclick="closeModal('importantAdds')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸŒŸ</span> Ø¥Ø¶Ø§ÙØ§Øª Ù‡Ø§Ù…Ø©</h2>
            <div class="content-box">
                <h4>Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù‡Ø§Ù…Ø©</h4>
                <p>Ù…Ù„ÙØ§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø³Ø§Ø¨Ù‚Ø©ØŒ Ù†Ù…Ø§Ø°Ø¬ Ø£Ø³Ø¦Ù„Ø©ØŒ ÙˆÙ…Ù„Ø§Ø²Ù… Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ù…ØªÙˆÙØ±Ø© Ù‡Ù†Ø§.</p>
            </div>
             <ul class="stage-list">
                <li class="stage-item" onclick="alert('ÙØªØ­ Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠ')">
                    <span>Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª </span><span>&larr;</span>
                </li>
                <li class="stage-item" onclick="alert('ÙØªØ­ Ù†Ù…Ø§Ø°Ø¬ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù†')">
                    <span>Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙˆØ²Ø§Ø±ÙŠØ© </span><span>&larr;</span>
                </li>
            </ul>
        </div>
    </div>
    
    <div id="digitalReader" class="modal">
         <div class="modal-content">
            <span class="close-button" onclick="closeModal('digitalReader')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸ“–</span> Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h2>
            <div class="content-box">
                <h4>Ù…Ù„Ø§Ø­Ø¸Ø©:</h4>
                <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ø³ØªÙ‚ÙˆÙ… Ø¨ÙØªØ­ Ù…Ù„ÙØ§Øª PDF/Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚. ÙŠØ±Ø¬Ù‰ ØªØµÙØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¯Ø±Ø³ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©.</p>
            </div>
            <button class="main-button" style="height: 60px;" onclick="closeModal('digitalReader'); openModal('stagesBrowser')">
                <span class="button-text">Ø§Ø¨Ø¯Ø£ ØªØµÙØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¯Ø±ÙˆØ³</span>
            </button>
        </div>
    </div>
    
    <div id="usageGuide" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('usageGuide')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸ’¡</span> Ø´Ø±Ø­ Ø§Ù„Ø¥Ø³ØªØ®Ø¯Ø§Ù…</h2>
            <div class="content-box">
                <h4>ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ</h4>
                <p>
                    1. Ù‚Ù… Ø¨Ù…Ù„Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. <br>
                    2. Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "**ØªØµÙØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ§Ù„Ø¯Ø±ÙˆØ³**" Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¯Ø±Ø³Ùƒ ÙÙŠ Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. <br>
                    3. **Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¯Ø±Ø³** ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ Ù„ÙØªØ­Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø±Ù‚Ù…ÙŠ). <br>
                    4. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø±Ù…Ø² **"ğŸ’–"** Ù„Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¯Ø±Ø³ Ø¥Ù„Ù‰ **Ù…ÙØ¶Ù„ØªÙŠ**. <br>
                    5. Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø© **"ğŸ‘¤"** Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ. <br>
                    6. Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø© **"ğŸŒ™"** Ù„ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶.
                    7. Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± **"ğŸ¤–"** Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ **Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ** Ù„Ø­Ù„ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠ.
                    </p>
            </div>
        </div>
    </div>
    
    <div id="supportShare" class="modal">
         <div class="modal-content">
            <span class="close-button" onclick="closeModal('supportShare')">&times;</span>
            <h2><span style="font-size: 1.5rem; color: var(--primary-color); margin-left: 10px;">ğŸ“£</span> Ø¯Ø¹Ù… ÙˆÙ†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</h2>
            <div class="content-box">
                <h4>Ø¯Ø¹Ù… Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†:</h4>
                <p>
                    Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ù„Ø®Ø¯Ù…Ø© Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©. Ø¯Ø¹Ù…ÙƒÙ… Ù„Ù†Ø§ ÙŠÙƒÙˆÙ† Ø¹Ø¨Ø± Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ÙŠÙ† Ø²Ù…Ù„Ø§Ø¦ÙƒÙ….
                </p>
            </div>
            <button class="main-button" style="height: 60px; background: linear-gradient(135deg, #25d366, #128c7e);" onclick="alert('ÙØªØ­ Ø±Ø§Ø¨Ø· Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨')">
                <span class="button-text">Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</span>
            </button>
            <button class="main-button" style="height: 60px; background: linear-gradient(135deg, #0077b5, #005580); margin-top: 15px;" onclick="alert('ÙØªØ­ Ø±Ø§Ø¨Ø· Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠØ³Ø¨ÙˆÙƒ')">
                <span class="button-text">Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙÙŠØ³Ø¨ÙˆÙƒ</span>
            </button>
        </div>
    </div>

    <div id="bookReader" class="modal">
        <div class="modal-content">
            <div class="header-reader">
                <h2 id="reader-book-title">Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h2>
                <button class="close-button" onclick="closeModal('bookReader')">
                    Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø±Ø¦ &times;
                </button>
            </div>
            <iframe id="book-iframe" src="" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>

    <script>
        
        // ===========================================
        // =          ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ JS          =
        // ===========================================
        
        const loginScreen = document.getElementById('login-screen');
        const mainAppContainer = document.getElementById('main-app-container');
        const modeToggle = document.getElementById('mode-toggle');
        const modeIcon = document.getElementById('mode-icon'); 
        const profileButton = document.getElementById('profile-button'); 
        const supportFab = document.getElementById('support-fab');
        const mainSearchInput = document.getElementById('main-search-input');
        const browserSearchInput = document.getElementById('browser-search-input');
        
        const sectionsContainer = document.getElementById('sections-container');
        const stagesBySectionContainer = document.getElementById('stages-by-section-container');
        const booksContainer = document.getElementById('books-container');
        const sectionStagesTitle = document.getElementById('section-stages-title');
        const stagesListBySection = document.getElementById('stages-list-by-section');
        const stageTitle = document.getElementById('stage-title');
        const subjectsList = document.getElementById('subjects-list');
        const sectionLink = document.getElementById('section-link');
        const loginErrorMessage = document.getElementById('login-error-message');
        const favoritesList = document.getElementById('favorites-list');
        const emptyFavoritesMessage = document.getElementById('empty-favorites');
        
        // Ø¹Ù†Ø§ØµØ± Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
        const profileName = document.getElementById('profile-name');
        const profileSection = document.getElementById('profile-section');
        const profileStage = document.getElementById('profile-stage');

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø±Ù‚Ù…ÙŠ (Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©)
        const bookReaderModal = document.getElementById('bookReader');
        const readerBookTitle = document.getElementById('reader-book-title');
        const bookIframe = document.getElementById('book-iframe');


        // Ù…ØªØºÙŠØ± Ø¹Ø§Ù„Ù…ÙŠ Ù„Ø­ÙØ¸ Ù…ÙØªØ§Ø­ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„ÙŠÙ‡
        window.currentSectionKey = ''; 
        window.currentStageName = '';
        
        // ===========================================
        // ==  Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ù… (ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙÙ‚Ø·) ==
        // ===========================================
        
        // Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ø¹Ù„Ù‰ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
        const officialLink = "https://t.me/MansourIndustrial"; 

        function createSubject(name, type, stageName, edition, link = "#") {
            const id = `sub-${name.replace(/\s/g, '_')}-${stageName}`;
            return { id, name, type, stageName, edition, link };
        }

        const stageNames = {
            '1': "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù†ÙŠ",
            '2': "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ù‡Ù†ÙŠ",
            '3': "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…Ù‡Ù†ÙŠ",
        };

        // Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø­Ø¯Ø«Ø© Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·
        const arabicSubjects = {
            '1': [
                createSubject("ÙƒØªØ§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "ÙƒØªØ§Ø¨ Ø£Ø³Ø§Ø³ÙŠ", "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "https://drive.google.com/file/d/1akmTSA25Jhc_e7dEvuilVp-j5yHtskAa/view?usp=drivesdk"),
                createSubject("Ù…Ù„Ø²Ù…Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£ÙˆÙ„", "Ù…Ù„Ø²Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©", "Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "#"),
            ],
            '2': [
                createSubject("ÙƒØªØ§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "ÙƒØªØ§Ø¨ Ø£Ø³Ø§Ø³ÙŠ", "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "https://drive.google.com/file/d/1mQj5m_u-J2L69I2Y8eqNCNqROes_s48e/view?usp=drivesdk"),
                createSubject("Ù…Ù„Ø²Ù…Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø«Ø§Ù†ÙŠ", "Ù…Ù„Ø²Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©", "Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "#"),
            ],
            '3': [
                createSubject("ÙƒØªØ§Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "ÙƒØªØ§Ø¨ Ø£Ø³Ø§Ø³ÙŠ", "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "https://drive.google.com/file/d/1D-s2ddrAOVVAnWtcst473tyqXbyGJV78/view?usp=drivesdk"),
                createSubject("Ù…Ù„Ø²Ù…Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«", "Ù…Ù„Ø²Ù…Ø© Ø®Ø§Ø±Ø¬ÙŠØ©", "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ù…Ù‡Ù†ÙŠ", "Ø¥ØµØ¯Ø§Ø± 2024", "#"),
            ]
        };

        // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· (Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
        const vocationalSections = {
            arabic: { name: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø£. Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù†", link: officialLink, stages: {
                'arabic_1': { name: stageNames['1'], books: arabicSubjects['1'] },
                'arabic_2': { name: stageNames['2'], books: arabicSubjects['2'] },
                'arabic_3': { name: stageNames['3'], books: arabicSubjects['3'] }
            }},
        };
        
        // ===========================================
        // == ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØºÙŠÙŠØ±) ==
        // ===========================================
        
        /**
         * Ø¯Ø§Ù„Ø© Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø¹ Ø­Ù‚Ù„ Ø¨Ø­Ø« Ø§Ù„Ù…ØªØµÙØ­.
         */
        function syncSearchInput() {
            browserSearchInput.value = mainSearchInput.value;
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„ØªØµÙØ­ØŒ ÙŠØªÙ… ØªØµÙÙŠØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨Ø§Ø´Ø±Ø©
            if (document.getElementById('stagesBrowser').style.display === 'flex') {
                filterBrowserContent();
            }
        }
        
        function attemptLogin() {
            const name = document.getElementById('studentName').value.trim();
            const sectionKey = document.getElementById('studentSection').value;
            const stageNumber = document.getElementById('studentStage').value;
            const password = document.getElementById('studentPassword').value.trim();
            
            if (name === "" || sectionKey === "" || stageNumber === "" || password === "") {
                loginErrorMessage.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù‚Ø³Ù…ØŒ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±).";
                loginErrorMessage.style.display = 'block';
                return;
            }
            
            localStorage.setItem('isLoggedIn', 'true');
            localStorage.setItem('studentName', name);
            localStorage.setItem('studentSectionKey', sectionKey);
            localStorage.setItem('studentStageNumber', stageNumber);

            loginScreen.style.display = 'none';
            mainAppContainer.style.display = 'block';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            modeToggle.classList.remove('hidden');
            modeToggle.style.display = 'flex';
            profileButton.classList.remove('hidden');
            profileButton.style.display = 'flex';
            supportFab.classList.remove('hidden');
            supportFab.style.display = 'flex';
            
            updateProfileModal();
            
            alert(`Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${name} ÙÙŠ Ù…Ù†ØµØ© Ø£Ø³ØªØ§Ø° Ø¹Ø§Ø¯Ù„ Ù…Ø­Ø³Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ! Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© Ù…ÙˆÙÙ‚Ø©. ğŸ˜Š`);
        }

        function updateProfileModal() {
            const name = localStorage.getItem('studentName') || "ØºÙŠØ± Ù…Ø³Ø¬Ù„";
            const sectionKey = localStorage.getItem('studentSectionKey');
            const stageNumber = localStorage.getItem('studentStageNumber');
            
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
            const sectionName = sectionKey === 'arabic' ? vocationalSections['arabic'].name : "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
            const stageName = stageNumber ? stageNames[stageNumber] : "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";

            profileName.textContent = name;
            profileSection.textContent = sectionName;
            profileStage.textContent = stageName;
        }

        function logout() {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) {
                clearAllData(false);
                closeModal('userProfile');
                mainAppContainer.style.display = 'none';
                
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                modeToggle.classList.add('hidden');
                profileButton.classList.add('hidden');
                supportFab.classList.add('hidden');

                loginScreen.style.display = 'block';
                
                document.getElementById('studentName').value = '';
                document.getElementById('studentSection').value = 'arabic'; // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙƒØ®ÙŠØ§Ø± Ø§ÙØªØ±Ø§Ø¶ÙŠ
                document.getElementById('studentStage').value = '';
                document.getElementById('studentPassword').value = '';
                loginErrorMessage.style.display = 'none';
                alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­.");
            }
        }
        
        function clearAllData(includeTheme = true) {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('studentName');
            localStorage.removeItem('studentSectionKey');
            localStorage.removeItem('studentStageNumber');
            localStorage.removeItem('favorites');
            if (includeTheme) {
                 localStorage.removeItem('theme');
            }
            alert("ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„Ù…ÙØ¶Ù„Ø©ØŒ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª). ÙŠØ±Ø¬Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„.");
            if (includeTheme) {
                window.location.reload(); 
            }
        }
        
        /**
         * ØªÙØªØ­ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© ÙˆØªØ®ÙÙŠ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©.
         */
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "flex";
            document.body.style.overflow = "hidden"; 
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
            modeToggle.classList.add('hidden');
            profileButton.classList.add('hidden');
            supportFab.classList.add('hidden'); 
            
            if (modalId === 'stagesBrowser') { 
                // *** ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù„Ù€ syncSearchInput Ùˆ filterBrowserContent ***
                syncSearchInput(); 
                showSections(); 
                filterBrowserContent();
            } else if (modalId === 'userProfile') { 
                updateProfileModal(); 
            } else if (modalId === 'myFavorites') {
                displayFavorites();
            } 
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø­Ø°Ù Ø­Ø§Ù„Ø© 'warningsPunishments' 
        }
        
        /**
         * ØªØºÙ„Ù‚ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© ÙˆØªØ¸Ù‡Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©.
         */
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
            document.body.style.overflow = "auto";
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø¯Ø®ÙˆÙ„Ù‡
            if (localStorage.getItem('isLoggedIn') === 'true') {
                modeToggle.classList.remove('hidden');
                profileButton.classList.remove('hidden');
                supportFab.classList.remove('hidden'); 
            }
        }
        
        // ... (Ø¨Ù‚ÙŠØ© Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ù„Ù… ØªØªØºÙŠØ±) ...
        
        function populateSections() {
            const list = document.querySelector('#sections-container .stage-list');
            list.innerHTML = '';
            
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: ÙŠØªÙ… Ø¹Ø±Ø¶ Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· (Ø§Ù„Ø¹Ø±Ø¨ÙŠ)ØŒ Ù„Ø°Ø§ Ù„Ù† ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙ†Ø§ Ù‚Ø§Ø¦Ù…Ø© Ø£Ù‚Ø³Ø§Ù… ÙØ¹Ù„ÙŠØ§Ù‹.
            // Ù†Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± Ù„ÙŠÙƒÙˆÙ† Ø¨Ù…Ø«Ø§Ø¨Ø© Ø²Ø± "Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØµÙØ­" Ø§Ù„Ø°ÙŠ ÙŠÙ†ØªÙ‚Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø±Ø§Ø­Ù„.
            const key = 'arabic';
            const section = vocationalSections[key];
            
            const listItem = document.createElement('li');
            listItem.classList.add('stage-item');
            listItem.dataset.search = section.name; 
            
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ù†Ù‚Ø± ÙŠÙ†ØªÙ‚Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø­Ù„
            listItem.onclick = () => showStagesBySection(key); 
            
            listItem.innerHTML = `
                <span>${section.name} (Ø§Ø¶ØºØ· Ù„Ù„ØªØµÙØ­ Ø§Ù„Ù…Ø±Ø§Ø­Ù„)</span>
                <span>&larr;</span>
            `;
            list.appendChild(listItem);
            
            // ÙŠÙ…ÙƒÙ† Ø£ÙŠØ¶Ø§Ù‹ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
            // showStagesBySection('arabic'); 
        }
        
        function filterBrowserContent() {
            const searchTerm = browserSearchInput.value.toLowerCase().trim();
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø±Ø¦ÙŠØ©
            const currentContainer = document.getElementById('stagesBrowser');
            const listItems = currentContainer ? currentContainer.querySelectorAll('.stage-item, .subject-item') : [];

            listItems.forEach(item => {
                const itemText = item.textContent.toLowerCase();
                const isMatch = itemText.includes(searchTerm);
                item.style.display = isMatch ? 'flex' : 'none';
            });
            
            if (document.getElementById('myFavorites').style.display === 'flex') {
                const visibleFavorites = Array.from(favoritesList.querySelectorAll('.favorite-list-item')).some(item => item.style.display !== 'none');
                emptyFavoritesMessage.style.display = visibleFavorites ? 'none' : 'block';
            }
        }
        
        browserSearchInput.addEventListener('input', filterBrowserContent);
        
        function getFavorites() {
            const favorites = localStorage.getItem('favorites');
            return favorites ? JSON.parse(favorites) : [];
        }

        function saveFavorites(favorites) {
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        function isFavorite(subjectId) {
            const favorites = getFavorites();
            return favorites.some(fav => fav.id === subjectId);
        }

        function toggleFavorite(subject) {
            let favorites = getFavorites();
            const index = favorites.findIndex(fav => fav.id === subject.id);
            const favButton = document.querySelector(`.favorite-toggle[onclick*="'${subject.id}'"]`);

            if (index !== -1) {
                // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
                favorites.splice(index, 1);
                alert(`ØªÙ… Ø­Ø°Ù "${subject.name}" Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©.`);
                if(favButton) { favButton.classList.remove('is-favorite'); favButton.innerHTML = 'ğŸ¤'; }
            } else {
                // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©
                favorites.push(subject);
                alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© "${subject.name}" Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©.`);
                if(favButton) { favButton.classList.add('is-favorite'); favButton.innerHTML = 'ğŸ’–'; }
            }
            saveFavorites(favorites);
            if (document.getElementById('myFavorites').style.display === 'flex') {
                displayFavorites();
            }
        }
        
        function removeFavorite(subjectId) {
             let favorites = getFavorites();
            const index = favorites.findIndex(fav => fav.id === subjectId);
            if (index !== -1) {
                 const name = favorites[index].name;
                 favorites.splice(index, 1);
                 saveFavorites(favorites);
                 const favButton = document.querySelector(`.favorite-toggle[onclick*="'${subjectId}'"]`);
                 if(favButton) {
                     favButton.classList.remove('is-favorite');
                     favButton.innerHTML = 'ğŸ¤';
                 }
                 alert(`ØªÙ… Ø­Ø°Ù "${name}" Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©.`);
                 displayFavorites();
            }
        }

        function displayFavorites() {
            const favorites = getFavorites();
            favoritesList.innerHTML = '';
            
            if (favorites.length === 0) {
                emptyFavoritesMessage.style.display = 'block';
            } else {
                emptyFavoritesMessage.style.display = 'none';
                favorites.forEach(fav => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('favorite-list-item');
                    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
                    const sectionName = vocationalSections[fav.sectionKey] ? vocationalSections[fav.sectionKey].name : "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"; 

                    listItem.innerHTML = `
                        <div>
                            ${fav.name}
                            <span class="subject-details">${sectionName} - ${fav.stageName}</span>
                        </div>
                        <button class="remove-favorite" onclick="event.stopPropagation(); removeFavorite('${fav.id}')">
                            Ø­Ø°Ù
                        </button>
                    `;
                    
                    let book = null;
                    if (vocationalSections[fav.sectionKey] && vocationalSections[fav.sectionKey].stages) {
                         for (const stageKey in vocationalSections[fav.sectionKey].stages) {
                             const stage = vocationalSections[fav.sectionKey].stages[stageKey];
                             book = stage.books.find(b => b.id === fav.id);
                             if (book) break;
                         }
                    }
                    
                    if (book && book.link && book.link !== '#') {
                        listItem.onclick = () => openBookInReader(book);
                    }
                    
                    favoritesList.appendChild(listItem);
                });
            }
            filterBrowserContent(); 
        }
        
        function showSections() {
            sectionsContainer.style.display = 'block';
            stagesBySectionContainer.style.display = 'none';
            booksContainer.style.display = 'none';
            populateSections();
            
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø¨Ù…Ø§ Ø£Ù†Ù‡ Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ØŒ Ù†Ù†ØªÙ‚Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                 showStagesBySection('arabic');
            }, 300);
            
            filterBrowserContent();
        }

        function showStagesBySection(sectionKey) {
            sectionsContainer.style.display = 'none';
            booksContainer.style.display = 'none';
            stagesBySectionContainer.style.display = 'block';
            
            window.currentSectionKey = sectionKey; 
            const section = vocationalSections[sectionKey];
            
            sectionStagesTitle.textContent = `Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ù„Ù€: ${section.name}`;
            stagesListBySection.innerHTML = ''; 
            
            for (const stageKey in section.stages) {
                const stage = section.stages[stageKey];
                const listItem = document.createElement('li');
                listItem.classList.add('stage-item');
                // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© ÙÙ‚Ø·
                listItem.dataset.search = stage.name; 
                
                const stageNum = stageKey.split('_')[1]; 
                
                // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ù†Ù‚Ø± ÙŠÙ†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ¨/Ø§Ù„Ø¯Ø±ÙˆØ³
                listItem.onclick = () => showBooks(sectionKey, stageNum, stage.name);
                
                listItem.innerHTML = `
                    <span>${stage.name} - ${stageNames[stageNum]}</span>
                    <span>&larr;</span>
                `;
                stagesListBySection.appendChild(listItem);
            }
            filterBrowserContent();
        }
        
        function showBooks(sectionKey, stageNumber, stageName) {
            stagesBySectionContainer.style.display = 'none';
            booksContainer.style.display = 'block';
            
            const section = vocationalSections[sectionKey];
            const stageKey = `${sectionKey}_${stageNumber}`;
            const stage = section.stages[stageKey];
            
            window.currentStageName = stageName; 
            
            stageTitle.textContent = `${section.name} - ${stageName}`;
            subjectsList.innerHTML = ''; 
            
            document.querySelector('#books-container .back-button').onclick = () => showStagesBySection(window.currentSectionKey);
            
            if (section.link && section.link !== '#') {
                sectionLink.href = section.link;
                sectionLink.style.display = 'inline-block';
            } else {
                sectionLink.style.display = 'none';
            }

            const books = stage.books || [];

            if (books.length === 0) {
                subjectsList.innerHTML = '<p style="color: #dc3545; margin-top: 20px; font-weight: 700;">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨/Ø¯Ø±ÙˆØ³ Ù…ØªÙˆÙØ±Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
                return;
            }

            books.forEach(book => {
                const subject = {
                    id: book.id,
                    name: book.name,
                    type: book.type,
                    stageName: stageName,
                    sectionKey: sectionKey,
                    edition: book.edition,
                    link: book.link 
                };

                const isFav = isFavorite(subject.id);
                const subjectJson = JSON.stringify(subject).replace(/"/g, '&quot;');

                const listItem = document.createElement('li');
                listItem.classList.add('subject-item');
                listItem.dataset.search = `${book.name} ${book.type} ${book.edition}`; 
                
                listItem.innerHTML = `
                    <div style="display:flex; align-items:center;">
                        <button class="favorite-toggle ${isFav ? 'is-favorite' : ''}" 
                                onclick="event.stopPropagation(); toggleFavorite(${subjectJson})">
                            ${isFav ? 'ğŸ’–' : 'ğŸ¤'}
                        </button>
                        <div>
                            ${book.name}
                            <span class="subject-details">${book.type} | ${book.edition}</span>
                        </div>
                    </div>
                    <span>&larr;</span>
                `;
                
                if (book.link && book.link !== '#') {
                    listItem.onclick = () => openBookInReader(book);
                } else {
                    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: ØªØºÙŠÙŠØ± Ù†Øµ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
                    listItem.onclick = () => alert(`Ø§Ù„Ù…Ø§Ø¯Ø©/Ø§Ù„Ù…Ù„Ø²Ù…Ø© "${book.name}" ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø¨Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø­Ø§Ù„ÙŠØ§Ù‹. Ù‚Ø¯ ØªØ¬Ø¯Ù‡Ø§ ÙÙŠ Ù‚Ù†Ø§Ø© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù….`);
                }
                
                subjectsList.appendChild(listItem);
            });
            filterBrowserContent();
        }


        /**
         * Ø¯Ø§Ù„Ø© Ù„ÙØªØ­ Ù…Ù„Ù Google Drive PDF Ø¯Ø§Ø®Ù„ Ù‚Ø§Ø±Ø¦ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (iframe).
         * @param {Object} book - ÙƒØ§Ø¦Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ ÙˆØ±Ø§Ø¨Ø·Ù‡.
         */
        function openBookInReader(book) {
            if (!book.link || book.link === '#') {
                alert(`Ø§Ù„Ù…Ø§Ø¯Ø© "${book.name}" ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø¨Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø­Ø§Ù„ÙŠØ§Ù‹.`);
                return;
            }

            // ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (view) Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ¶Ù…ÙŠÙ† (preview)
            const embedLink = book.link.replace(/(\/d\/[a-zA-Z0-9_-]+)(\/.*)?/, '$1/preview');
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ø§ÙØ°Ø©
            readerBookTitle.textContent = `${book.name} - ${window.currentStageName}`;
            
            // ØªØ¹ÙŠÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ¶Ù…ÙŠÙ† ÙÙŠ iframe
            bookIframe.src = embedLink;

            // **Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© 404/Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© ÙÙŠ Ø§Ù„Ù€ iframe**
            // ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ø°Ø§ Ø§Ø³ØªØºØ±Ù‚ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ iframe ÙˆÙ‚ØªØ§Ù‹ Ø·ÙˆÙŠÙ„Ø§Ù‹ ÙƒØ¨Ø¯ÙŠÙ„.
            bookIframe.onload = function() {
                // Ù‚Ø¯ Ù„Ø§ ÙŠØ¹Ù…Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠØ©ØŒ Ù„ÙƒÙ† Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ø§Ù„Ø±Ø§Ø¨Ø·
            };
            
            // Ø§Ø­ØªÙŠØ§Ø·: ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ iframe Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
            setTimeout(() => {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù€ iframe Ø£Ùˆ ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶ØŒ Ù†ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
                // Ù‡Ø°Ø§ ÙŠØ¶Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³ØªØ·ÙŠØ¹ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø§Ø¯Ø© Ø­ØªÙ‰ Ù„Ùˆ ÙØ´Ù„ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
                const originalLink = book.link.replace('/view?usp=drivesdk', '/view?usp=sharing');
                bookIframe.onerror = function() {
                    alert(`ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø±Ù‚Ù…ÙŠ. Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ù…Ø§Ø¯Ø© "${book.name}" ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…ØªØµÙØ­ Ø¬Ø¯ÙŠØ¯Ø©.`);
                    window.open(originalLink, '_blank', 'noopener,noreferrer');
                };

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† src Ù„Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø£Ùˆ Ù„ØªÙØ¹ÙŠÙ„ onerror
                bookIframe.src = bookIframe.src; 
                
            }, 3000); 


            // ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ù‚Ø§Ø±Ø¦
            openModal('bookReader');
        }


        // Ø¯Ø§Ù„Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ (Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù…Ø² Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ)
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            if (isDarkMode) {
                localStorage.setItem('theme', 'dark');
                modeIcon.textContent = 'â˜€ï¸'; // Ø¹Ø±Ø¶ Ø±Ù…Ø² Ø§Ù„Ø´Ù…Ø³ ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ (Ù„Ù„ØªØºÙŠÙŠØ± Ù„Ù„Ù†Ù‡Ø§Ø±ÙŠ)
            } else {
                localStorage.setItem('theme', 'light');
                modeIcon.textContent = 'ğŸŒ™'; // Ø¹Ø±Ø¶ Ø±Ù…Ø² Ø§Ù„Ù‚Ù…Ø± ÙÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ (Ù„Ù„ØªØºÙŠÙŠØ± Ù„Ù„ÙŠÙ„ÙŠ)
            }
            
            document.body.style.background = getComputedStyle(document.documentElement).getPropertyValue('--background-body');
        }
        
        // ===========================================
        // ==  Ø¯Ø§Ù„Ø© Ù…Ø­Ø§ÙƒØ§Ø© Ø±Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ù…ÙØ¹Ø¯Ù„Ø© Ù„Ù„Ø¹Ø±Ø¨ÙŠ)  ==
        // ===========================================

        function getAIResponse() {
            const prompt = document.getElementById('ai-prompt-input').value.trim();
            const responseArea = document.getElementById('ai-response-area');
            const responseText = document.getElementById('ai-response-text');

            if (prompt === "") {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
                return;
            }

            // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø¯ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ±...'
            responseArea.style.display = 'block';
            responseText.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙÙƒÙŠØ± ÙÙŠ Ø¥Ø¬Ø§Ø¨ØªÙƒ... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± <span style="font-weight: 900;">(Ù…Ø­Ø§ÙƒØ§Ø©)</span>';

            // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ£Ø®ÙŠØ± Ø§Ù„Ø±Ø¯
            setTimeout(() => {
                let simulatedResponse = '';
                
                // Ø±Ø¯ÙˆØ¯ Ù…ÙØ¹Ø¯Ù„Ø© Ù„ØªÙ†Ø§Ø³Ø¨ Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                if (prompt.includes('Ø§Ù„Ø§Ø³ØªÙÙ‡Ø§Ù…') || prompt.includes('Ø§Ø³ØªÙÙ‡Ù…')) {
                    simulatedResponse = '**Ø§Ù„Ø§Ø³ØªÙÙ‡Ø§Ù…** Ù‡Ùˆ Ø·Ù„Ø¨ Ø§Ù„ÙÙ‡Ù… Ø£Ùˆ Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø¨Ø´ÙŠØ¡ Ù„Ù… ÙŠÙƒÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Ù‹ Ù„Ù„Ø³Ø§Ø¦Ù„. Ø£Ø¯ÙˆØ§ØªÙ‡ ØªÙ†Ù‚Ø³Ù… Ø¥Ù„Ù‰ Ø­Ø±ÙˆÙ (Ø§Ù„Ù‡Ù…Ø²Ø©ØŒ Ù‡Ù„) ÙˆØ£Ø³Ù…Ø§Ø¡ (Ù…Ù†ØŒ Ù…Ø§ØŒ ÙƒÙŠÙØŒ Ù…ØªÙ‰ØŒ Ø£ÙŠÙ†ØŒ Ø¥Ù„Ø®). Ø§Ù„Ù‡Ù…Ø²Ø© Ùˆ "Ù‡Ù„" Ø­Ø±ÙØ§Ù† Ù„Ø§ Ù…Ø­Ù„ Ù„Ù‡Ù…Ø§ Ù…Ù† Ø§Ù„Ø¥Ø¹Ø±Ø§Ø¨.';
                } else if (prompt.includes('Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…') || prompt.includes('Ø§Ù„ØªØ£Ø®ÙŠØ±')) {
                    simulatedResponse = 'Ù‚Ø§Ø¹Ø¯Ø© **ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¨Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¨ØªØ¯Ø£** ÙˆØ¬ÙˆØ¨Ø§Ù‹ ØªØ­Ø¯Ø« ÙÙŠ Ø­Ø§Ù„Ø§Øª Ù…Ø¹ÙŠÙ†Ø©ØŒ Ù…Ø«Ù„: Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø¨Ø± Ù…Ù† Ø§Ù„Ø£Ù„ÙØ§Ø¸ Ø§Ù„ØªÙŠ Ù„Ù‡Ø§ Ø§Ù„ØµØ¯Ø§Ø±Ø© ÙÙŠ Ø§Ù„ÙƒÙ„Ø§Ù… (Ù…Ø«Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø§Ø³ØªÙÙ‡Ø§Ù…). Ù…Ø«Ø§Ù„: *Ù…ØªÙ‰ Ø§Ù„Ø³ÙØ±ÙØŸ* (Ù…ØªÙ‰: Ø§Ø³Ù… Ø§Ø³ØªÙÙ‡Ø§Ù… Ù…Ø¨Ù†ÙŠ ÙÙŠ Ù…Ø­Ù„ Ø±ÙØ¹ Ø®Ø¨Ø± Ù…Ù‚Ø¯Ù… ÙˆØ¬ÙˆØ¨Ø§Ù‹).';
                } else if (prompt.includes('Ø§Ù„Ù†ÙÙŠ') || prompt.includes('Ù„Ø§') || prompt.includes('Ù„Ù…')) {
                    simulatedResponse = 'Ø§Ù„Ù†ÙÙŠ Ù‡Ùˆ Ø¥Ù†ÙƒØ§Ø± Ø­Ø¯ÙˆØ« Ø´ÙŠØ¡. Ù…Ù† Ø£Ø¯ÙˆØ§ØªÙ‡ Ø§Ù„Ù…Ù‡Ù…Ø©: **Ù„ÙŠØ³Øª** (ÙØ¹Ù„ Ù…Ø§Ø¶Ù Ù†Ø§Ù‚Øµ ÙŠÙÙŠØ¯ Ø§Ù„Ù†ÙÙŠØŒ ÙŠØ¹Ù…Ù„ Ø¹Ù…Ù„ ÙƒØ§Ù†). **Ù…Ø§ Ø§Ù„Ù†Ø§ÙÙŠØ© Ø§Ù„Ø­Ø¬Ø§Ø²ÙŠØ©** (ØªØ¹Ù…Ù„ Ø¹Ù…Ù„ Ù„ÙŠØ³ Ø¨Ø´Ø±ÙˆØ·). Ùˆ **Ù„Ø§ Ø§Ù„Ù†Ø§ÙÙŠØ© Ù„Ù„Ø¬Ù†Ø³** (ØªØ¹Ù…Ù„ Ø¹Ù…Ù„ Ø¥Ù† Ø¨Ø´Ø±ÙˆØ·).';
                } else if (prompt.includes('Ø§Ù„Ù…Ø¯Ø­') || prompt.includes('Ø§Ù„Ø°Ù…') || prompt.includes('Ù†Ø¹Ù…')) {
                    simulatedResponse = 'Ø£ÙØ¹Ø§Ù„ **Ø§Ù„Ù…Ø¯Ø­ ÙˆØ§Ù„Ø°Ù…** Ù‡ÙŠ *Ù†Ø¹Ù…* Ùˆ *Ø¨Ø¦Ø³*. Ù„Ù‡Ø§ Ø£Ø±Ø¨Ø¹ Ø­Ø§Ù„Ø§Øª Ù„Ù„ÙØ§Ø¹Ù„ØŒ Ø£Ø´Ù‡Ø±Ù‡Ø§ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„ÙØ§Ø¹Ù„ Ù…ÙØ­Ù„Ù‰ Ø¨Ù€ *Ø§Ù„*. Ù…Ø«Ø§Ù„: Ù†Ø¹Ù…Ù **Ø§Ù„Ø±Ø¬Ù„Ù** Ù…Ø­Ù…Ø¯ÙŒ.';
                } else {
                    simulatedResponse = 'Ø¹ÙÙˆØ§Ù‹ØŒ Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¢Ù†ØŒ Ù„ÙƒÙ† ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹Ù„Ù… Ø¨Ø£Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‡ÙŠ ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ³ØªØªÙˆÙØ± Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¨Ø´ÙƒÙ„ ØªÙØ§Ø¹Ù„ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø¨Ø§Ù„Ø£Ø³ÙÙ„.';
                }
                
                responseText.innerHTML = simulatedResponse;
                
                // ØªÙ†Ø¸ÙŠÙ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                document.getElementById('ai-prompt-input').value = '';
                
            }, 2000); // ØªØ£Ø®ÙŠØ± Ù„Ù…Ø¯Ø© Ø«Ø§Ù†ÙŠØªÙŠÙ†
        }
        
        // ===========================================
        // == ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ø§Ù„Ø§Ù†Ø°Ø§Ø±Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨Ø§Øª ==
        // ===========================================
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ 
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            const autoDarkModeCheckbox = document.getElementById('autoDarkMode');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                modeIcon.textContent = 'â˜€ï¸';
                if(autoDarkModeCheckbox) autoDarkModeCheckbox.checked = true;
            } else {
                modeIcon.textContent = 'ğŸŒ™';
                if(autoDarkModeCheckbox) autoDarkModeCheckbox.checked = false;
            }
            
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                loginScreen.style.display = 'none';
                mainAppContainer.style.display = 'block';
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø¯Ø®ÙˆÙ„Ù‡
                if (modeToggle) { modeToggle.style.display = 'flex'; modeToggle.classList.remove('hidden'); }
                if (profileButton) { profileButton.style.display = 'flex'; profileButton.classList.remove('hidden'); }
                if (supportFab) { supportFab.style.display = 'flex'; supportFab.classList.remove('hidden'); }
                
                updateProfileModal();
            } else {
                loginScreen.style.display = 'block';
                mainAppContainer.style.display = 'none';
                
                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¹Ù†Ø¯ Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
                if (modeToggle) modeToggle.style.display = 'none';
                if (profileButton) profileButton.style.display = 'none';
                if (supportFab) supportFab.style.display = 'none';
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
            if (sectionsContainer) {
                 // Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù‚Ø³Ù… ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·ØŒ Ù†Ù†ØªÙ‚Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø§Ø­Ù„
                 showStagesBySection('arabic');
            }
            
            // ØªÙ… Ø­Ø°Ù Ø¯Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†Ø°Ø§Ø±Ø§Øª
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal(event.target.id);
            }
        }
        
        // Ø±Ø¨Ø· Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø¨Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¨Ø¯ÙŠÙ„
        if (modeToggle) modeToggle.addEventListener('click', toggleDarkMode);
        
        // ØªÙ… Ø­Ø°Ù Ø±Ø¨Ø· Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ù„Ø£Ù† Ø§Ù„Ù†Ø§ÙØ°Ø© Ø­ÙØ°ÙØª)
    </script>
</body>
</html>
